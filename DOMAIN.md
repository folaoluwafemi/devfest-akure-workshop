# DevFest Akure 2025 Posts App - Domain Specification

## üéØ Product Overview

A simple social posts app where users can share posts with images, like and comment on posts, and view other users' profiles.

---

## üë§ User Domain

### User Entity

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `id` | UUID | Yes | Auto-generated by Supabase Auth |
| `email` | String | Yes | User's email (from auth) |
| `first_name` | String | Yes | User's first name |
| `last_name` | String | Yes | User's last name |
| `profile_picture` | String? | No | URL to profile image |
| `bio` | String? | No | Short user bio (max 160 chars) |
| `x_handle` | String? | No | Twitter/X username (without @) |
| `created_at` | DateTime | Yes | Account creation timestamp |
| `updated_at` | DateTime? | No | Last profile update |

### User Features

- **Sign Up**: Create account with email/password + profile info
- **Login**: Email/password authentication
- **Logout**: End session
- **Edit Profile**: Update own profile information
- **View Profile**: View any user's public profile

---

## üìù Post Domain

### Post Entity

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `id` | UUID | Yes | Auto-generated |
| `user_id` | UUID | Yes | Reference to post author |
| `content` | String | Yes | Post text content (max 500 chars) |
| `image_urls` | List<String> | No | Up to 4 image URLs |
| `created_at` | DateTime | Yes | Post creation timestamp |
| `updated_at` | DateTime? | No | Last edit timestamp |

### Post Features

- **Create Post**: Write content, optionally attach up to 4 images
- **View Feed**: See all posts (newest first)
- **View Post**: See single post with comments
- **Delete Post**: Remove own posts only

---

## ‚ù§Ô∏è Like Domain

### Like Entity

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `id` | UUID | Yes | Auto-generated |
| `user_id` | UUID | Yes | Who liked |
| `post_id` | UUID | Yes | Which post |
| `created_at` | DateTime | Yes | When liked |

### Like Features

- **Like Post**: Add like to a post
- **Unlike Post**: Remove like from a post
- **View Like Count**: See total likes on a post

> **Constraint**: One like per user per post (unique on user_id + post_id)

---

## üí¨ Comment Domain

### Comment Entity

| Field | Type | Required | Description |
|-------|------|----------|-------------|
| `id` | UUID | Yes | Auto-generated |
| `user_id` | UUID | Yes | Comment author |
| `post_id` | UUID | Yes | Which post |
| `content` | String | Yes | Comment text (max 280 chars) |
| `created_at` | DateTime | Yes | Comment timestamp |

### Comment Features

- **Add Comment**: Write a text comment on a post
- **View Comments**: See all comments on a post
- **Delete Comment**: Remove own comments only

---

## üì± Screens Overview

### Authentication
1. **Login Screen** - Email/password login
2. **Sign Up Screen** - Registration form with profile fields

### Main App
3. **Feed Screen** - List of all posts (home)
4. **Create Post Screen** - Form to create new post
5. **Post Detail Screen** - Single post with comments
6. **Profile Screen** - View user profile + their posts
7. **Edit Profile Screen** - Update own profile info

### Navigation
- Bottom nav: Feed | Create | Profile
- Or: Feed as home, FAB for create, profile in app bar

---

## üóÑÔ∏è Database Tables (Supabase)

```
Tables to create via MCP:

1. profiles
   - id (uuid, references auth.users)
   - first_name (text)
   - last_name (text)
   - profile_picture (text, nullable)
   - bio (text, nullable)
   - x_handle (text, nullable)
   - created_at (timestamptz)
   - updated_at (timestamptz, nullable)

2. posts
   - id (uuid, primary key)
   - user_id (uuid, references profiles)
   - content (text)
   - image_urls (text[], nullable)
   - created_at (timestamptz)
   - updated_at (timestamptz, nullable)

3. likes
   - id (uuid, primary key)
   - user_id (uuid, references profiles)
   - post_id (uuid, references posts)
   - created_at (timestamptz)
   - UNIQUE(user_id, post_id)

4. comments
   - id (uuid, primary key)
   - user_id (uuid, references profiles)
   - post_id (uuid, references posts)
   - content (text)
   - created_at (timestamptz)
```

---

## üîê Row Level Security (RLS) Policies

### Profiles
- **SELECT**: Anyone can view any profile
- **INSERT**: Users can create their own profile (on signup)
- **UPDATE**: Users can only update their own profile

### Posts
- **SELECT**: Anyone can view any post
- **INSERT**: Authenticated users can create posts
- **UPDATE**: Users can only update their own posts
- **DELETE**: Users can only delete their own posts

### Likes
- **SELECT**: Anyone can view likes
- **INSERT**: Authenticated users can like posts
- **DELETE**: Users can only remove their own likes

### Comments
- **SELECT**: Anyone can view comments
- **INSERT**: Authenticated users can comment
- **DELETE**: Users can only delete their own comments

---

## üéØ MVP Priority

### Must Have (Workshop Core)
- [ ] User sign up & login
- [ ] View posts feed
- [ ] Create a post (text only is fine)
- [ ] View user profiles

### Should Have (If Time Permits)
- [ ] Like posts
- [ ] Comment on posts
- [ ] Edit profile
- [ ] Logout

### Nice to Have (Bonus)
- [ ] Image uploads
- [ ] Real-time updates
- [ ] Pull to refresh
- [ ] Post detail screen

---

## üí° Prompting Guide

Use these prompts with Copilot to build each feature:

**Auth:**
> "Create a sign up screen with fields for first name, last name, email, password, and an optional bio. Use the project architecture with Provider for state management."

**Feed:**
> "Create a posts feed screen that fetches posts from Supabase, shows them in a ListView with the author's name, content, and like count. Include pull to refresh."

**Create Post:**
> "Build a create post screen with a text field for content and a submit button. Use PostsProvider to handle the Supabase insert."

**Profile:**
> "Create a profile screen that shows user info (name, bio, X handle) and a list of their posts below."

---

*This is your product spec. Let Copilot + Supabase MCP handle the implementation!* üöÄ
